# Homework 6

**P40**
> 考虑图3・58。假设TCP Reno是一个经历如上所示行为的协议，回答下列问题。在各种情况中，简要地论证你的回答。
[![GIRiUP.png](https://s1.ax1x.com/2020/04/10/GIRiUP.png)](https://imgchr.com/i/GIRiUP)

a. 指出TCP慢启动运行时的时间间隔。
[1, 6], [23, 26]
b. 指出TCP拥塞避免运行时的时间间隔。
[6, 16], [17, 22]
c. 在第16个传输轮回之后，报文段的丢失是根据3个冗余ACK还是根据超时检测岀来的？
该报文段的丢失是由3个冗余ACK导致的。
d. 在第22个传输轮回之后，报文段的丢失是根据3个冗余ACK还是根据超时检测出来的？
第23个传输轮回, 拥塞窗口大小设置为1, 故上一个轮回(第22个)是超时检测出来的。
e. 在第1个传输轮回里，ssthresh的初始值设置为多少？
32
f. 在第18个传输轮回里，ssthresh的值设置为多少？
第17个轮回窗口值的一半, 即42/2 = 21。
g. 在第24个传输轮回里，ssthresh的值设置为多少？
取拥塞时的一半, 即29/2 = 14(取下限值)
h. 在哪个传输轮回内发送第70个报文段？
$(1 + 2 + 4 + 8 + 16 + 32 = 63) < 70 < (63 + 33 = 96)$, 故在第7轮发送出去
i. 假定在第26个传输轮回后，通过收到3个冗余ACK检测出有分组丢失，拥塞的窗口长度和ssthresh的值应当是多少？
拥塞窗口长度和ssthresh值应设置为8的一半，即4。
j. 假定使用TCP Tahoe （而不是TCP Reno）,并假定在第16个传输轮回收到3个冗余ACK。在第19个传输轮回，ssthresh和拥塞窗口长度是什么？
阈值为21，拥塞窗口大小为1。
k. 再次假设使用TCP Tahoe,在第22个传输轮回有一个超时事件。从第17个传输轮回到第22个传 输轮回（包括这两个传输轮回），一共发送了多少分组？
格式: 该轮回发送分组个数(轮回数)
$1(17)+2(18)+4(19)+8(20)+16(21)+21(22) = 52个。

**P42**
在3. 5. 4节中，我们讨论了在发生超时事件后将超时间隔加倍。为什么除了这种加倍超时间隔机制外，TCP还需要基于窗口的拥塞控制机制（如在3. 7节中学习的那种机制）呢？
因为TCP使用的是流水线方式工作, 仅仅靠时间间隔加倍无法阻止已发送的大流量数据。倘若网络堵塞非常严重, 会导致丢包。这时就要引入其他拥塞控制，防止这种现象发生。

$\frac{W}{2}+\left ( \frac{W}{2} +1\right )+...+W=\sum_{n=0}^{W/2}(\frac{W}{2}+n)=\left ( \frac{W}{2}+1 \right )\frac{W}{2}+\frac{W/2(W/2+1)}{2}=\frac{W^2}{4}+\frac{W}{2}+\frac{W^2}{8}+\frac{W}{4}=\frac{3}{8}W^2+\frac{3}{4}W$

**P44** 
> 考虑从一台主机经一条没有丢包的TCP连接向另一台主机发送一个大文件。

a. 假定TCP使用不具有慢启动的AIMD进行拥塞控制。假设每当收到一批ACK时，cwnd增加1个MSS,并且假设往返时间大约恒定，cwnd从6MSS增加到12MSS要花费多长时间（假设没有丢包事件）？
6RTTs。
b. 对于该连接，到时间=6RTT,其平均吞吐量是多少（根据MSS和RTT）?
第一次发送RTT 6 MSS；  
第二次发送RTT 7 MSS；
第三次发送RTT 9 MSS；
第四次发送RTT 10 MSS；
第五次发送RTT 11 MSS； 
发送时间为6RTT，总MSS为 $6+7+8+9+10+11=51$MSS。平均吞吐量为$51/6=8.5MSS/RTT$。
